---
title: Interceptors
description: Use custom interceptors for the fetch client used for API calls
navigation:
  icon: i-lucide-split
---

## Usage

Interceptors allow you to define custom functions that will be used by [sanctumClient](/composables/usesanctumclient) during API calls. 
Here are some examples of what you can do with it:
- Add custom headers to all requests (e.g. `X-Localization`, `Accept-Language`, etc)
- Use telemetry or logging for requests/responses
- Modify the request payload before sending

::warning
If you are not familiar with [ofetch](https://github.com/unjs/ofetch) interceptors, 
check this [documentation](https://github.com/unjs/ofetch?tab=readme-ov-file#%EF%B8%8F-interceptors) first.
::

## Configuration

This module provides special hooks to define your interceptors:
- `sanctum:request`
- `sanctum:response`

You can set up a new plugin and describe the behaviour of handling each outgoing request and incoming response.

Here is an example of the plugin that writes a log entry for each request and response:

```typescript [app/plugins/sanctum-listener.ts]
export default defineNuxtPlugin((nuxtApp) => {
  nuxtApp.hook('sanctum:request', (app, ctx, logger) => {
    logger.info('Sanctum request hook triggered', ctx.request)
  })

  nuxtApp.hook('sanctum:response', (app, ctx, logger) => {
    logger.info('Sanctum response hook triggered', ctx.request)
  })
})
```

Each interceptor receives 3 arguments:
1. `app` - an instance of the current `NuxtApp`
2. `ctx` - `FetchContext` instance for the current operation with access to request, response, and options (*query, headers, etc*)
3. `logger` - an instance of a Consola logger used by the module (will be prefixed with `nuxt-auth-sanctum`)
