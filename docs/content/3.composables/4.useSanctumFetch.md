---
title: useSanctumFetch
description: How to use useSanctumFetch to fetch data from Laravel API
navigation:
  icon: i-lucide-parentheses
---

## Usage

Besides `useSanctumClient` you can directly send a request by using a module-specific 
version of fetch composable - `useSanctumFetch`.

This composable implements a similar interface to `useFetch`/`useAsyncData`, 
so you can check more details [here](https://nuxt.com/docs/api/composables/use-fetch).

Composable accepts 3 arguments:
- endpoint URL to call
- `SanctumFetchOptions` to pass to the [Sanctum client](/composables/usesanctumclient) (`ofetch`)
- `AsyncDataOptions` to pass to `useAsyncData` under the hood

::warning
Keep in mind that some properties of `FetchOptions` are not available in `SanctumFetchOptions` due to misbehaviour 
on override by the user. You should set them only by using 
the [module configuration](/usage/configuration) or [Nuxt hooks](/hooks/sanctum-request). Unavailable properties:
- `baseUrl`
- `credentials`, `redirect`, `retry`
- `onRequest`, `onRequestError`
- `onResponse`, `onResponseError`
::

```typescript
const { data, status, error, refresh } = await useSanctumFetch('/api/users')

// or

const { data, status, error, refresh } = await useSanctumFetch(
  '/api/users',
  {
    method: 'GET',
    query: {
      is_active: true,
    },
  },
  {
    pick: ['id'],
  },
  'my-request-key',
)
```

You can also use type casting to work with the response as an interface:

```typescript
interface MyResponse {
  name: string
}

const { data } = await useSanctumFetch<MyResponse>('/api/endpoint')

const name = data.value.name // augmented by MyResponse interface
```

## Reactive parameters

If you want to use reactive parameters for the query, you should pass `SanctumFetchOptions` as a function 
to recalculate values on a new request

```typescript
const page = ref(1)

const { data } = await useSanctumFetch(
    '/api/posts',
    () => ({ 
        params: {
            page: page.value, // reactive value
        } 
    }),
    {
        watch: [page],
    },
)
```

Once `page` value changes, the data will be refetched automatically, and the new value will be passed in query parameters.
